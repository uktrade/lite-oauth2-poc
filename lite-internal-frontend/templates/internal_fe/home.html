{% block content %}
<h1>Internal User Home</h1>

{% if request.user.is_authenticated %}
    You are logged in locally
    <p>
        <a href="{% url 'auth:logout' %}?next={{ request.path }}">Logout</a>
    </p>

    <h3>Local session details</h3>
    <pre>{{ profile }}</pre>

    {% if request.session.jwt %}
        <p>JWT: {{ request.session.jwt }}</p>
        <h3>Remote API response:</h3>
        <form method="post">
            {% csrf_token %}
            {% if api_response.status_code == 200 %}
                {{ api_response.json }}
                <button name="action" type="submit" value="delete">Delete</button>
            {% elif api_response.status_code == 401 %}
                You don't have a user on remote server <button name="action" type="submit" value="create">Create one now</button>
            {% else %}
                <p>{{ api_response.status_code }} {{ api_response }}</p>
            {% endif %}
        </form>
    {% endif %}

{% else %}
    You're not logged in locally. 
    <p>
        <a href="{% url 'auth:login' %}">Login</a>
    </p>
    <p>
        <a href="{% url 'auth:jwt-login' %}">Login using JWT</a>
    </p>
{% endif %}

{% endblock %}
